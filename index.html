<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Bookflix - Английский книжный клуб</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <img src="logo.svg" alt="Bookflix" class="logo">
        </header>

        <main>
            <!-- Book of Month Section -->
            <div id="bookSection" class="content-section active">
                <div class="book-hero">
                    <img id="bookImage" src="book-of-month.png" alt="Книга месяца" class="book-cover">
                    <h1 id="bookTitle" class="book-title-main">Loading...</h1>
                    <div class="book-meta">
                        <span class="book-badge">Книга месяца</span>
                        <span id="bookAuthor" class="meta-author">Загрузка...</span>
                        <span class="meta-publish">Публикация: <span id="bookDate">—</span> • <span id="bookPages">—</span></span>
                    </div>
                    
                    <div class="book-actions">
                        <button class="action-icon-btn" id="purchaseBtn" title="Купить подписку">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M6 7V6a6 6 0 0 1 12 0v1"/>
                                <path d="M3 7h18l-1.5 14H4.5L3 7z"/>
                            </svg>
                            <span>Купить подписку</span>
                        </button>
                        <button class="action-icon-btn" id="shareBtn" title="Поделиться">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="18" cy="5" r="3"/>
                                <circle cx="6" cy="12" r="3"/>
                                <circle cx="18" cy="19" r="3"/>
                                <line x1="8.6" y1="11" x2="15.4" y2="7"/>
                                <line x1="8.6" y1="13" x2="15.4" y2="17"/>
                            </svg>
                            <span>Поделиться</span>
                        </button>
                        <button class="action-icon-btn" id="readBtn" title="Читать">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M2 4h8l2 3 2-3h8v16h-8l-2-3-2 3H2z"/>
                            </svg>
                            <span>Читать</span>
                        </button>
                    </div>
                </div>

                <div class="book-description-preview collapsed" id="bookDescription">
                    <p id="bookDescriptionText">Загрузка...</p>
                    <div class="fade-mask"></div>
                    <button type="button" class="description-toggle" id="bookDescriptionToggle">Читать дальше</button>
                </div>
            </div>

            <!-- Magazine Section -->
            <div id="magazineSection" class="content-section">
                <div class="magazine-hero">
                    <img id="magazineImage" src="magazine-22.png" alt="Журнал" class="magazine-cover" onerror="this.src='magazine-22.png'">
                    <h2 id="magazineTitle" class="magazine-title-main">Загрузка...</h2>
                    <p id="magazineShortDescription" class="magazine-short">Загрузка...</p>
                </div>

                <div class="expandable-section">
                    <button class="expand-btn" onclick="toggleMagazineDescription()">
                        <span>О чём журнал</span>
                        <svg class="expand-icon" id="magazineExpandIcon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </button>
                    <div class="expandable-content" id="magazineDescription">
                        <p id="magazineFullDescription">Загрузка...</p>
                    </div>
                </div>
            </div>

            <!-- Subscription Screen (hidden by default, shown via tab navigation) -->
            <div id="subscriptionTabContent" class="content-section">
                <div class="tab-content-wrapper">
                    <div id="subscriptionContent">
                        <div class="loading">Загрузка статуса подписки...</div>
                    </div>
                </div>
            </div>

            <!-- Reading Room Screen (hidden by default, shown via tab navigation) -->
            <div id="readingRoomTabContent" class="content-section">
                <div class="tab-content-wrapper">
                    <div id="readingRoomContent">
                        <div class="loading">Проверка доступа...</div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Bottom Tab Bar -->
        <nav class="tab-bar">
            <button class="tab-item active" data-tab="home">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9.5L12 3l9 6.5V21a1 1 0 0 1-1 1h-6v-6H10v6H4a1 1 0 0 1-1-1V9.5z"/>
                </svg>
                <span>Главная</span>
            </button>
            <button class="tab-item" data-tab="subscription" id="subscriptionTabBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="5" width="20" height="14" rx="2" ry="2"/>
                    <line x1="2" y1="10" x2="22" y2="10"/>
                    <line x1="6" y1="15" x2="9" y2="15"/>
                </svg>
                <span>Подписка</span>
            </button>
            <button class="tab-item" data-tab="magazine">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                    <rect x="3" y="4" width="18" height="16" rx="2"/>
                    <line x1="3" y1="10" x2="21" y2="10"/>
                </svg>
                <span>Магазин</span>
            </button>
            <button class="tab-item" data-tab="readingRoom" id="readingRoomTabBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                    <path d="M4 4h16v12H7l-3 3v-3z"/>
                </svg>
                <span>Поддержка</span>
            </button>
        </nav>

        <!-- Purchase Subscription Screen -->
        <div id="purchaseScreen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" onclick="showHome()">← Назад</button>
                <h2>Купить подписку</h2>
            </div>
            <div class="screen-content">
                <div id="purchaseContent">
                    <p>Выберите план подписки:</p>
                    <div class="plan-selector">
                        <button class="plan-btn" onclick="selectPlan(30)">1 месяц - 299₽</button>
                    </div>
                    <div id="paymentWidget" class="hidden"></div>
                </div>
            </div>
        </div>

        <!-- My Subscription Screen -->
        <div id="subscriptionScreen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" onclick="showHome()">← Назад</button>
                <h2>Моя подписка</h2>
            </div>
            <div class="screen-content">
                <div id="subscriptionContent">
                    <div class="loading">Загрузка статуса подписки...</div>
                </div>
            </div>
        </div>

        <!-- Reading Room Screen -->
        <div id="readingRoomScreen" class="screen hidden">
            <div class="screen-header">
                <button class="back-btn" onclick="showHome()">← Назад</button>
                <h2>Reading Room</h2>
            </div>
            <div class="screen-content">
                <div id="readingRoomContent">
                    <div class="loading">Проверка доступа...</div>
                </div>
            </div>
        </div>

        <!-- Confirmation Screen -->
        <div id="confirmationScreen" class="screen hidden">
            <div class="screen-content">
                <div class="confirmation-message">
                    <div class="success-icon">✓</div>
                    <h2>Оплата успешна!</h2>
                    <p>Ваша подписка активирована.</p>
                    <button class="main-button" onclick="showHome()">Продолжить</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

